# DataTables——统一定义的金融历史数据表

`DataTable`是`qteasy`内置统一定义的数据存储表。包括：

## 最重要的数据表

- `trade_calendar` -- 交易日历表，包含了所有交易所的交易日历信息，包括交易日、交易所代码、交易所名称等信息。可以说这是`qteasy`运行的基础，如果缺了这张表，`qteasy`的很多功能都将无法运行或者将降低效率。 `qteasy`使用这张表中的数据来判断交易日，如果要下载其他的数据表，通常也必须通过交易日数据表来确定下载的起止日期，因此，这是您应该**绝对优先**填充的数据表。
- `stock_basic` -- 股票基本信息表，包含了所有上市股票的基本信息，包括股票代码、股票名称、上市日期、退市日期、所属行业、地域等信息。这张表是很多其他数据表的基础，例如股票日K线数据表、股票财务数据表等，因此，这也是您应该**优先**填充的数据表。
- `index_basic` -- 指数基本信息表，包含了所有指数的基本信息，包括指数代码、指数名称、发布日期、退市日期等信息。这张表是很多其他数据表的基础，例如指数日K线数据表、指数成分股表等，因此，这也是您应该**优先**填充的数据表。
- `fund_basic` -- 基金基本信息表，包含了所有基金的基本信息，包括基金代码、基金名称、基金类型、基金规模等信息。这张表是很多其他数据表的基础，例如基金日K线数据表、基金净值数据表等，因此，这也是您应该**优先**填充的数据表。

除了上面提到的几张重要的数据表之外，数据源中还定义了大量的数据表，这些数据表包含了各种各样的金融数据，包括股票、指数、基金、期货、期权等各种金融产品的基本信息、日K线数据、财务数据、分红数据、业绩报表、宏观经济数据等等，主要分类如下：

- 行情数据表 -- 这类数据表包含了股票、基金、指数各个不同频率的K线行情数据
- 基本信息表 -- 这类数据表包含了股票、基金、指数、期货、期权等各种金融产品的基本信息
- 指标信息表 -- 这类数据表包含了各种指标的信息，例如技术指标、基本面指标、宏观经济指标等
- 财务数据表 -- 这类数据表包含了上市公司的财务报表数据，包括资产负债表、利润表、现金流量表等
- 业绩报表表 -- 这类数据表包含了上市公司的业绩报表数据，包括业绩快报、业绩预告、业绩预测等
- 分红交易数据表 -- 这类数据表包含了上市公司的分红数据，以及股票大宗交易、股东交易等信息表
- 参考数据表 -- 这类数据表包含了各种参考数据，例如宏观经济数据、行业数据、交易所数据等

数据表的`schema`信息可以通过`DataSource`对象的`get_table_info()`方法获取:

```python
>>> from qteasy import DataSource
>>> ds = DataSource()
>>> ds.get_table_info('trade_calendar')
```


下面是所有数据表的详细定义

下面所有表格中，各个字段的含义如下：

- **`columns`** -- 字段名
- **`dtypes`** -- 字段数据类型, `varchar`表示字符串类型，`int`表示整数类型，`float`表示浮点数类型，`date`表示日期类型，`text`表示文本类型
- **`remarks`** -- 字段备注
- **`is_prime_key`** -- 是否是主键，`Y`表示是主键，`N`表示不是主键


## 交易日历表

|    | columns       | dtypes     | remarks                                                        | is_prime_key   |
|---:|:--------------|:-----------|:---------------------------------------------------------------|:---------------|
|  0 | cal_date      | date       | 日期: 格式YYYYMMDD                                                 | Y              |
|  1 | exchange      | varchar(9) | 交易所：SSE上交所,SZSE深交所,CFFEX 中金所,SHFE 上期所,CZCE 郑商所,DCE 大商所,INE 上能源 | Y              |
|  2 | is_open       | tinyint    | 是否交易：是：1，否：0                                                   | N              |
|  3 | pretrade_date | date       | 上一交易日                                                          | N              |

## 基本信息表：

基本信息表包括了股票、指数、基金、期货、期权等各种金融产品的基本信息。

### 股票基本信息表: `stock_basic`

股票基本信息表包含了所有上市股票的基本信息，包括股票代码、股票名称、上市日期、退市日期、所属行业、地域等信息。

 |    | columns     | dtypes       | remarks      | is_prime_key   |
|---:|:------------|:-------------|:-------------|:---------------|
|  0 | ts_code     | varchar(9)   | 证券代码     | Y              |
|  1 | symbol      | varchar(6)   | 股票代码     | N              |
|  2 | name        | varchar(20)  | 股票名称     | N              |
|  3 | area        | varchar(10)  | 地域         | N              |
|  4 | industry    | varchar(10)  | 所属行业     | N              |
|  5 | fullname    | varchar(50)  | 股票全称     | N              |
|  6 | enname      | varchar(120) | 英文全称     | N              |
|  7 | cnspell     | varchar(40)  | 拼音缩写     | N              |
|  8 | market      | varchar(6)   | 市场类型     | N              |
|  9 | exchange    | varchar(6)   | 交易所代码   | N              |
| 10 | curr_type   | varchar(6)   | 交易货币     | N              |
| 11 | list_status | varchar(4)   | 上市状态     | N              |
| 12 | list_date   | date         | 上市日期     | N              |
| 13 | delist_date | date         | 退市日期     | N              |
| 14 | is_hs       | varchar(2)   | 是否沪深港通 | N              |

### 上市公司基本信息表: `stock_company`

上市公司基本信息表包含了所有上市公司的基本信息，包括公司代码、公司名称、法人代表、总经理、董秘、注册资本、注册日期、所在省份、所在城市、公司介绍、公司主页、电子邮件、办公室地址、员工人数、主要业务及产品、经营范围等信息。

 |    | columns        | dtypes      | remarks        | is_prime_key   |
|---:|:---------------|:------------|:---------------|:---------------|
|  0 | ts_code        | varchar(10) | 股票代码       | Y              |
|  1 | exchange       | varchar(10) | 交易所代码     | N              |
|  2 | chairman       | varchar(48) | 法人代表       | N              |
|  3 | manager        | varchar(48) | 总经理         | N              |
|  4 | secretary      | varchar(48) | 董秘           | N              |
|  5 | reg_capital    | float       | 注册资本       | N              |
|  6 | setup_date     | date        | 注册日期       | N              |
|  7 | province       | varchar(20) | 所在省份       | N              |
|  8 | city           | varchar(20) | 所在城市       | N              |
|  9 | introduction   | text        | 公司介绍       | N              |
| 10 | website        | varchar(75) | 公司主页       | N              |
| 11 | email          | text        | 电子邮件       | N              |
| 12 | office         | text        | 办公室地址     | N              |
| 13 | employees      | int         | 员工人数       | N              |
| 14 | main_business  | text        | 主要业务及产品 | N              |
| 15 | business_scope | text        | 经营范围       | N              |

### 新股上市基本信息表: `new_share`

新股上市基本信息表包含了所有新股上市的基本信息，包括股票代码、股票名称、发行日期、发行价格、发行市盈率、发行市净率、发行市销率、发行总股本、发行市值、募集资金、网上发行总量、网下发行总量、网上中签率、网下中签率等信息。

 |    | columns       | dtypes      | remarks              | is_prime_key   |
|---:|:--------------|:------------|:---------------------|:---------------|
|  0 | ts_code       | varchar(20) | TS股票代码           | Y              |
|  1 | sub_code      | varchar(20) | 申购代码             | N              |
|  2 | name          | varchar(50) | 名称                 | N              |
|  3 | ipo_date      | date        | 上网发行日期         | N              |
|  4 | issue_date    | date        | 上市日期             | N              |
|  5 | amount        | float       | 发行总量（万股）     | N              |
|  6 | market_amount | float       | 上网发行总量（万股） | N              |
|  7 | price         | float       | 发行价格             | N              |
|  8 | pe            | float       | 市盈率               | N              |
|  9 | limit_amount  | float       | 个人申购上限（万股） | N              |
| 10 | funds         | float       | 募集资金（亿元）     | N              |
| 11 | ballot        | float       | 中签率               | N              |

### table name: ` index_basic `
more descriptions here: 

 |    | columns     | dtypes      | remarks   | is_prime_key   |
|---:|:------------|:------------|:----------|:---------------|
|  0 | ts_code     | varchar(24) | 证券代码  | Y              |
|  1 | name        | varchar(80) | 简称      | N              |
|  2 | fullname    | varchar(80) | 指数全称  | N              |
|  3 | market      | varchar(8)  | 市场      | N              |
|  4 | publisher   | varchar(30) | 发布方    | N              |
|  5 | index_type  | varchar(30) | 指数风格  | N              |
|  6 | category    | varchar(6)  | 指数类别  | N              |
|  7 | base_date   | date        | 基期      | N              |
|  8 | base_point  | float       | 基点      | N              |
|  9 | list_date   | date        | 发布日期  | N              |
| 10 | weight_rule | text        | 加权方式  | N              |
| 11 | desc        | text        | 描述      | N              |
| 12 | exp_date    | date        | 终止日期  | N              |

### table name: ` fund_basic `
more descriptions here: 

 |    | columns        | dtypes      | remarks                     | is_prime_key   |
|---:|:---------------|:------------|:----------------------------|:---------------|
|  0 | ts_code        | varchar(24) | 证券代码                    | Y              |
|  1 | name           | varchar(48) | 简称                        | N              |
|  2 | management     | varchar(20) | 管理人                      | N              |
|  3 | custodian      | varchar(20) | 托管人                      | N              |
|  4 | fund_type      | varchar(8)  | 投资类型                    | N              |
|  5 | found_date     | date        | 成立日期                    | N              |
|  6 | due_date       | date        | 到期日期                    | N              |
|  7 | list_date      | date        | 上市时间                    | N              |
|  8 | issue_date     | date        | 发行日期                    | N              |
|  9 | delist_date    | date        | 退市日期                    | N              |
| 10 | issue_amount   | float       | 发行份额(亿)                | N              |
| 11 | m_fee          | float       | 管理费                      | N              |
| 12 | c_fee          | float       | 托管费                      | N              |
| 13 | duration_year  | float       | 存续期                      | N              |
| 14 | p_value        | float       | 面值                        | N              |
| 15 | min_amount     | float       | 起点金额(万元)              | N              |
| 16 | exp_return     | float       | 预期收益率                  | N              |
| 17 | benchmark      | text        | 业绩比较基准                | N              |
| 18 | status         | varchar(2)  | 存续状态D摘牌 I发行 L已上市 | N              |
| 19 | invest_type    | varchar(10) | 投资风格                    | N              |
| 20 | type           | varchar(10) | 基金类型                    | N              |
| 21 | trustee        | varchar(10) | 受托人                      | N              |
| 22 | purc_startdate | date        | 日常申购起始日              | N              |
| 23 | redm_startdate | date        | 日常赎回起始日              | N              |
| 24 | market         | varchar(2)  | E场内O场外                  | N              |

### table name: ` future_basic `
more descriptions here: 

 |    | columns         | dtypes      | remarks          | is_prime_key   |
|---:|:----------------|:------------|:-----------------|:---------------|
|  0 | ts_code         | varchar(24) | 证券代码         | Y              |
|  1 | symbol          | varchar(12) | 交易标识         | N              |
|  2 | exchange        | varchar(8)  | 交易市场         | N              |
|  3 | name            | varchar(40) | 中文简称         | N              |
|  4 | fut_code        | varchar(12) | 合约产品代码     | N              |
|  5 | multiplier      | float       | 合约乘数         | N              |
|  6 | trade_unit      | varchar(4)  | 交易计量单位     | N              |
|  7 | per_unit        | float       | 交易单位(每手)   | N              |
|  8 | quote_unit      | varchar(80) | 报价单位         | N              |
|  9 | quote_unit_desc | varchar(80) | 最小报价单位说明 | N              |
| 10 | d_mode_desc     | varchar(20) | 交割方式说明     | N              |
| 11 | list_date       | date        | 上市日期         | N              |
| 12 | delist_date     | date        | 最后交易日期     | N              |
| 13 | d_month         | varchar(6)  | 交割月份         | N              |
| 14 | last_ddate      | date        | 最后交割日       | N              |
| 15 | trade_time_desc | varchar(80) | 交易时间说明     | N              |

### table name: ` opt_basic `
more descriptions here: 

 |    | columns        | dtypes      | remarks      | is_prime_key   |
|---:|:---------------|:------------|:-------------|:---------------|
|  0 | ts_code        | varchar(24) | 证券代码     | Y              |
|  1 | exchange       | varchar(6)  | 交易市场     | N              |
|  2 | name           | varchar(50) | 合约名称     | N              |
|  3 | per_unit       | varchar(10) | 合约单位     | N              |
|  4 | opt_code       | varchar(12) | 标准合约代码 | N              |
|  5 | opt_type       | varchar(6)  | 合约类型     | N              |
|  6 | call_put       | varchar(6)  | 期权类型     | N              |
|  7 | exercise_type  | varchar(6)  | 行权方式     | N              |
|  8 | exercise_price | float       | 行权价格     | N              |
|  9 | s_month        | varchar(8)  | 结算月       | N              |
| 10 | maturity_date  | date        | 到期日       | N              |
| 11 | list_price     | float       | 挂牌基准价   | N              |
| 12 | list_date      | date        | 开始交易日期 | N              |
| 13 | delist_date    | date        | 最后交易日期 | N              |
| 14 | last_edate     | date        | 最后行权日期 | N              |
| 15 | last_ddate     | date        | 最后交割日期 | N              |
| 16 | quote_unit     | varchar(12) | 报价单位     | N              |
| 17 | min_price_chg  | varchar(6)  | 最小价格波幅 | N              |

### table name: ` ths_index_basic `
more descriptions here: 

 |    | columns   | dtypes      | remarks            | is_prime_key   |
|---:|:----------|:------------|:-------------------|:---------------|
|  0 | ts_code   | varchar(14) | 代码               | Y              |
|  1 | name      | text        | 名称               | N              |
|  2 | count     | int         | 成分个数           | N              |
|  3 | exchange  | varchar(4)  | 交易所             | N              |
|  4 | list_date | date        | 上市日期           | N              |
|  5 | type      | varchar(4)  | N概念指数S特色指数 | N              |

### table name: ` sw_industry_basic `
more descriptions here: 

 |    | columns       | dtypes      | remarks            | is_prime_key   |
|---:|:--------------|:------------|:-------------------|:---------------|
|  0 | index_code    | varchar(14) | 指数代码           | Y              |
|  1 | industry_name | varchar(40) | 行业名称           | N              |
|  2 | parent_code   | varchar(6)  | 父级代码           | N              |
|  3 | level         | varchar(6)  | 行业名称           | N              |
|  4 | industry_code | varchar(10) | 行业代码           | N              |
|  5 | is_pub        | varchar(4)  | 是否发布了指数     | N              |
|  6 | src           | varchar(8)  | 行业分类（SW申万） | N              |